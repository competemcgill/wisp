# Problems

Among other functionality, WISP hosts an evolving set of problems and problem sets for users to attempt, and tracks their progress. The purpose of this microservice is to manage all data and logic relating to these problems and problem sets.

## API Documentation

For a more extensive documentation, visit the swagger docs

### ProblemSets

<br>

> Model

```javascript
{
    title: String,
    description: String,
    tags: [String],
    problemCount: Number
}
```

<br>

> GET /problemSets

**Query params**

* `includeProblems=true`: for each problem set returned, includes an array of problems belonging to that problem set as the field `problems`

**Responses**

| Status | Response |
| --- | --- |
| 200 | Array of problemSets |
| 500 | Internal server error |

<br>

> GET /problemSets/{problemSetId}

**Query params**

* `includeProblems=true`: includes an array of problems belonging to the specified problem set as the field `problems`

**Params**

* `problemSetId`: ID for problemSet to fetch

**Responses**

| Status | Response |
| --- | --- |
| 200 | ProblemSet |
| 404 | ProblemSet not found |
| 422 | Missing or invalid problemSetId |
| 500 | Internal server error |

<br>

> POST /problemSets

**Body**

See ProblemSet model

**Responses**

| Status | Response |
| --- | --- |
| 200 | ProblemSet |
| 422 | Missing or invalid params in body |
| 500 | Internal server error |

<br>

> PUT /problemSets/{problemSetId}

**Params**

* `problemSetId`: ID for problemSet to update

**Body**

See ProblemSet model

**Responses**

| Status | Response |
| --- | --- |
| 200 | ProblemSet |
| 404 | ProblemSet not found |
| 422 | Missing or invalid problemSetId or body |
| 500 | Internal server error |

<br>

> DELETE /problemSets/{problemSetId}

**Params**

* `problemSetId`: ID for problemSet to delete

**Responses**

| Status | Response |
| --- | --- |
| 200 | Empty |
| 404 | ProblemSet not found |
| 422 | Missing or invalid problemSetId |
| 500 | Internal server error |

<br>

### Problems

<br>

> Model

```javascript
{
    title: String,
    source: String,
    problemId: String,
    sourceLink: String,
    problemSetIds: [String],
    problemMetadata: {
        platformProblemId: String,
        difficulty: String
    }
}
```

NOTE: `problemId` is generated by the backend, and should not be included in POST/PUT requests

<br>

> GET /problems

**Responses**

| Status | Response |
| --- | --- |
| 200 | Array of problems |
| 500 | Internal server error |

<br>

> GET /problems/{problemId}

**Params**

* `problemId`: ID for problem to fetch

**Responses**

| Status | Response |
| --- | --- |
| 200 | Problem |
| 404 | Problem not found |
| 422 | Missing or invalid problemId |
| 500 | Internal server error |

<br>

> POST /problems

**Body**

See Problem model, but don't include `problemId` parameter in the body

**Responses**

| Status | Response |
| --- | --- |
| 200 | Problem |
| 422 | Missing or invalid params in body |
| 500 | Internal server error |

<br>

> PUT /problems/{problemId}

**Params**

* `problemId`: ID for problem to update

**Body**

See Problem model, but don't include `problemId` parameter in the body

**Responses**

| Status | Response |
| --- | --- |
| 200 | Problem |
| 404 | Problem not found |
| 422 | Missing or invalid problemId or body |
| 500 | Internal server error |

<br>

> DELETE /problems/{problemId}

**Params**

* `problemId`: ID for problem to delete

**Responses**

| Status | Response |
| --- | --- |
| 200 | Empty |
| 404 | Problem not found |
| 422 | Missing or invalid problemId |
| 500 | Internal server error |

<br>

> GET /problems/{problemId}/exists

**Params**

* `generatedProblemId`: ID for problem to fetch
    * This `generatedProblemId` that is used in this requests URL is a custom ID that can be generated by the hash of platform name and number. This is as an alternative to using the Mongo ID, as the microservice needs to check the existance of problems using minimal information, without knowing the MongoID.
        * Example: in the case of Codeforces problem, the `generatedProblemId` is created by concatenating the platform ("CODEFORCES") and the problem ID as displayed on the platform ("1352G"), and then taking the SHA-1 hash of the resulting string.
    * This is the `problemId` from the Problem model (instead of the usual mongo ID)

**Responses**

| Status | Response |
| --- | --- |
| 200 | Problem |
| 404 | Problem not found |
| 422 | Missing or invalid generatedProblemId |
| 500 | Internal server error |

<br>